<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2a0916" />
  <title>Bhanu â™¥ Lola â€” Long Distance Love</title>
  <meta name="description" content="Starry-night kawaii long-distance love page for Bhanu & Lola." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Quicksand:wght@400;600;700&family=Baloo+2:wght@600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --pink:#ec4899; --indigo:#6366f1; }
    body { font-family:'Quicksand',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif; }
    /* Better typography on small screens */
    h1{ letter-spacing:0.2px }
    @media (max-width:480px){ h1{ font-size:2.1rem } }
    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .heartbeat, .emoji, .heart, .shimmer::after{ animation: none !important }
    }
    /* Starfield */
    .starfield::before,.starfield::after{ content:""; position:absolute; inset:0; background-image:radial-gradient(circle at 20% 20%, rgba(244, 114, 182, 0.18), transparent 42%), radial-gradient(circle at 80% 60%, rgba(217, 70, 239, 0.14), transparent 36%); pointer-events:none; }
    .star{position:absolute;width:2px;height:2px;background:#fff;border-radius:999px;opacity:.6;animation:twinkle var(--dur,3s) infinite ease-in-out}
    @keyframes twinkle{0%,100%{opacity:.2}50%{opacity:1}}
    /* Floating hearts */
    .heart{position:absolute;color:rgba(255,255,255,.85);animation:floatUp linear infinite;filter:drop-shadow(0 2px 6px rgba(255,192,203,.35))}
    @keyframes floatUp{from{transform:translateY(0);opacity:0}10%{opacity:1}to{transform:translateY(-110vh);opacity:0}}
    /* Kawaii emojis */
    .emoji{position:absolute;animation:bobbing ease-in-out infinite;opacity:.9}
    @keyframes bobbing{0%{transform:translateY(6px)}50%{transform:translateY(-6px)}100%{transform:translateY(6px)}}
    /* Cute button shimmer */
    .shimmer::after{ content:""; position:absolute; inset:0; transform:translateX(-100%); background:linear-gradient(90deg,transparent,rgba(255,255,255,.5),transparent); animation:shine 2s linear infinite; border-radius:inherit; }
    @keyframes shine{to{transform:translateX(100%)}}
    /* Lovey dovey upgrades */
    .glow{ box-shadow:0 0 0 4px rgba(236,72,153,.15), 0 10px 40px rgba(236,72,153,.25); }
    .heartbeat{ animation:heartbeat 1.6s ease-in-out infinite; }
    @keyframes heartbeat{0%{transform:scale(1)}30%{transform:scale(1.06)}40%{transform:scale(1)}70%{transform:scale(1.06)}100%{transform:scale(1)}}
    .love-gradient{ background:linear-gradient(90deg,#fbcfe8,#f472b6,#a78bfa); -webkit-background-clip:text; background-clip:text; color:transparent; }
    /* Cursor heart (fallback to pointer if blocked) */
    body{ cursor:pointer; }
    /* Smaller CPU when not visible */
    :root{ --anim-scale:1 }
    @media (max-width:480px){ :root{ --anim-scale:.9 } }
    .heart-icon{display:inline-block;vertical-align:-0.18em;margin:0 .2em;filter:drop-shadow(0 2px 10px rgba(236,72,153,.35));}
  .heart-icon svg{transform-origin:center;}
  .heart-icon{display:inline-block;vertical-align:-0.18em;margin:0 .2em;filter:drop-shadow(0 2px 10px rgba(236,72,153,.35));}
  .heart-icon svg{transform-origin:center;}
  .badge-sticker{display:inline-flex;align-items:center;gap:.35rem;padding:.2rem .6rem;border-radius:999px;font-size:.73rem;font-weight:700;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.22);backdrop-filter:blur(6px);box-shadow:0 6px 24px rgba(244,114,182,.22), inset 0 0 0 2px rgba(251,113,133,.1)}
  /* Mobile kawaii boost */
  @media (max-width:480px){
    .emoji{font-size:1.6rem}
    .heart{font-size:22px !important}
    .heart-icon svg{width:48px}
    .glow{box-shadow:0 0 0 6px rgba(244,114,182,.22), 0 14px 50px rgba(236,72,153,.32)}
  }
  /* kawaii candy UI */
  h1, .kawaii{ font-family:'Baloo 2','Quicksand',system-ui; letter-spacing:.3px }
  .candy-btn{position:relative;display:inline-flex;align-items:center;gap:.5rem;border-radius:999px;background:linear-gradient(90deg,#fb7185,#ec4899,#f472b6);padding:.6rem 1rem;font-weight:800;color:white;box-shadow:0 12px 40px rgba(244,114,182,.35)}
  .candy-btn::after{content:"";position:absolute;inset:0;border-radius:inherit;background:linear-gradient(90deg,transparent,rgba(255,255,255,.45),transparent);transform:translateX(-100%);animation:shine 2.4s linear infinite}
  .divider{height:14px;display:flex;align-items:center;gap:.5rem;justify-content:center;opacity:.85}
  .divider:before,.divider:after{content:"";height:1px;width:36%;background:linear-gradient(90deg,rgba(255,255,255,.0),rgba(251,113,133,.6))}
  .divider:after{background:linear-gradient(90deg,rgba(251,113,133,.6),rgba(255,255,255,.0))}
  .blob{position:absolute;filter:blur(40px);opacity:.35;animation:blob 16s ease-in-out infinite;pointer-events:none}
  .blob.b1{background:#fb7185;width:420px;height:420px;left:-120px;top:-60px}
  .blob.b2{background:#f472b6;width:360px;height:360px;right:-80px;bottom:10%}
  .blob.b3{background:#f0abfc;width:300px;height:300px;left:50%;top:35%;transform:translateX(-50%)}
  @keyframes blob{0%,100%{transform:translate(0,0) scale(1)}50%{transform:translate(12px,-18px) scale(1.05)}}
</style>
  <!-- Perf hints for Spotify embed -->
  <link rel="preconnect" href="https://open.spotify.com" crossorigin>
  <link rel="dns-prefetch" href="https://open.spotify.com">
  <link rel="preconnect" href="https://i.scdn.co" crossorigin>
</head>
<body class="min-h-screen bg-gradient-to-br from-rose-950 via-pink-900 to-rose-950 text-slate-100 selection:bg-pink-300/40 selection:text-black relative overflow-x-hidden">
  <!-- Background layers -->
  <div class="starfield pointer-events-none absolute inset-0 -z-10"></div>
  <div id="stars" class="pointer-events-none absolute inset-0 -z-10"></div>
  <div class="blob b1 -z-10"></div>
  <div class="blob b2 -z-10"></div>
  <div class="blob b3 -z-10"></div>
  <div id="emojis" class="pointer-events-none absolute inset-0"></div>
  <div id="hearts" class="pointer-events-none absolute inset-0"></div>
  <!-- kawaii soft vignette overlay -->
  <div class="pointer-events-none absolute inset-0 -z-10 opacity-70 md:opacity-50"
       style="background: radial-gradient(120vw 60vh at 15% 20%, rgba(244,114,182,.22), transparent 55%),
                               radial-gradient(120vw 60vh at 85% 70%, rgba(251,113,133,.18), transparent 55%)"></div>

  <!-- HERO -->
  <header class="relative mx-auto max-w-5xl px-6 pt-20 text-center">
    <h1 class="love-gradient text-4xl md:text-6xl font-extrabold leading-tight [text-wrap:balance] heartbeat will-change-transform" text-4xl md:text-6xl font-extrabold leading-tight [text-wrap:balance] heartbeat">
      Bhanu <span class="heart-icon" aria-hidden>
        <svg viewBox="0 0 64 58" xmlns="http://www.w3.org/2000/svg" class="w-[clamp(28px,4vw,44px)] h-auto">
          <defs>
            <linearGradient id="gHeartCute" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#fbcfe8"/>
              <stop offset="55%" stop-color="#f472b6"/>
              <stop offset="100%" stop-color="#fb7185"/>
            </linearGradient>
          </defs>
          <path d="M32 56s-8.6-7.5-14.7-13.6C9.2 34.3 4 29.2 4 22.1 4 13.6 11 8 18.5 8c4.6 0 8.2 2.2 10.1 5.6C30.6 10.2 34.2 8 38.8 8 46.3 8 53.3 13.6 53.3 22.1c0 7.1-5.2 12.2-12.9 20.3C40.3 45.7 32 56 32 56z" fill="url(#gHeartCute)" stroke="rgba(255,255,255,.6)" stroke-width="1"/>
        </svg>
      </span> Lola
    </h1>

    <!-- Language toggle -->
    <div class="mt-2 flex justify-center gap-2">
      <button id="lang-es" class="rounded-full bg-white/10 px-3 py-1 text-xs ring-1 ring-white/20 hover:bg-white/20">ğŸ‡»ğŸ‡ª EspaÃ±ol</button>
      <button id="lang-hi" class="rounded-full bg-white/10 px-3 py-1 text-xs ring-1 ring-white/20 hover:bg-white/20">ğŸ‡®ğŸ‡³ Hinglish</button>
    </div>
    <!-- cute mobile-only stickers under toggle -->
    <div class="mt-2 md:hidden flex justify-center gap-2">
      <span class="badge-sticker">mi reina âœ¨</span>
      <span class="badge-sticker">jaan ğŸ§¸</span>
    </div>

    <p id="tagline" class="mt-3 text-sm md:text-base opacity-80">â€”</p>

    <div class="mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2">
      <!-- TIME SHARED -->
      <div class="rounded-3xl border border-white/10 bg-white/5 p-5 shadow-xl backdrop-blur glow">
        <div class="mb-3 flex items-center gap-2">
          <div class="grid h-10 w-10 place-items-center rounded-2xl bg-pink-500/20 text-pink-200">ğŸ•’</div>
          <h2 id="timeSharedTitle" class="text-lg font-bold">â€”</h2>
        </div>
        <div class="grid grid-cols-2 items-center gap-2 rounded-2xl bg-white/5 px-4 py-2">
          <span id="yearsLabel" class="opacity-70">Years</span><span id="years" class="text-right text-lg font-semibold">â€”</span>
        </div>
        <div class="grid grid-cols-2 items-center gap-2 rounded-2xl bg-white/5 px-4 py-2 mt-2">
          <span id="monthsLabel" class="opacity-70">Months</span><span id="months" class="text-right text-lg font-semibold">â€”</span>
        </div>
        <div class="grid grid-cols-2 items-center gap-2 rounded-2xl bg-white/5 px-4 py-2 mt-2">
          <span id="daysLabel" class="opacity-70">Days</span><span id="days" class="text-right text-lg font-semibold">â€”</span>
        </div>
        <div class="mt-2 grid grid-cols-3 gap-2">
          <div class="rounded-xl bg-white/5 px-3 py-2 text-center"><div id="hours" class="text-base font-bold">â€”</div><div id="hoursLabel" class="text-[10px] uppercase tracking-wide opacity-60">Hours</div></div>
          <div class="rounded-xl bg-white/5 px-3 py-2 text-center"><div id="minutes" class="text-base font-bold">â€”</div><div id="minutesLabel" class="text-[10px] uppercase tracking-wide opacity-60">Minutes</div></div>
          <div class="rounded-xl bg-white/5 px-3 py-2 text-center"><div id="seconds" class="text-base font-bold">â€”</div><div id="secondsLabel" class="text-[10px] uppercase tracking-wide opacity-60">Seconds</div></div>
        </div>
      </div>

      <!-- NEXT MONTHSARY -->
      <div class="rounded-3xl border border-white/10 bg-white/5 p-5 shadow-xl backdrop-blur glow">
        <div class="mb-3 flex items-center gap-2">
          <div class="grid h-10 w-10 place-items-center rounded-2xl bg-pink-500/20 text-pink-200">ğŸ“…</div>
          <h2 id="nextMonthsaryTitle" class="text-lg font-bold">â€”</h2>
        </div>
        <p class="text-lg font-semibold" id="nextDate">â€”</p>
        <div class="mt-3 grid grid-cols-3 gap-2">
          <div class="rounded-xl bg-white/5 px-3 py-2 text-center"><div id="dLeft" class="text-base font-bold">â€”</div><div class="text-[10px] uppercase tracking-wide opacity-60">Days</div></div>
          <div class="rounded-xl bg-white/5 px-3 py-2 text-center"><div id="hLeft" class="text-base font-bold">â€”</div><div class="text-[10px] uppercase tracking-wide opacity-60">Hours</div></div>
          <div class="rounded-xl bg-white/5 px-3 py-2 text-center"><div id="mLeft" class="text-base font-bold">â€”</div><div class="text-[10px] uppercase tracking-wide opacity-60">Minutes</div></div>
        </div>
        <button id="celebrate" class="relative shimmer mt-4 inline-flex items-center gap-2 rounded-2xl bg-pink-500 px-5 py-2.5 text-base font-semibold text-white shadow-lg shadow-pink-600/20 ring-2 ring-pink-300/60 transition active:scale-95">ğŸ’– Celebrate</button>
      </div>
    </div>
  </header>

  <!-- CLOCKS -->
  <section class="mx-auto mt-12 max-w-5xl px-6">
    <div id="longDistanceBadge" class="mb-3 inline-flex items-center gap-1 rounded-full border border-pink-300/60 bg-rose-400/10 px-3 py-1 text-xs font-extrabold text-rose-100 shadow-sm backdrop-blur">âœ¨ Har km mein pyaar Â· Amorcito vibes</div>
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
      <div class="rounded-3xl border border-white/10 bg-white/5 p-5 shadow-xl backdrop-blur">
        <div class="mb-2 flex items-center justify-between">
          <div class="flex items-center gap-2">
            <span class="text-2xl leading-none">ğŸ‡®ğŸ‡³</span>
            <div><div class="text-sm font-semibold">New Delhi</div><div class="text-xs opacity-60">India</div></div>
          </div>
          <div class="text-pink-300">ğŸ“</div>
        </div>
        <div class="flex items-baseline justify-between">
          <div id="timeIN" class="text-2xl font-bold">â€”</div>
          <div id="weekdayIN" class="text-xs opacity-60">â€”</div>
        </div>
      </div>
      <div class="rounded-3xl border border-white/10 bg-white/5 p-5 shadow-xl backdrop-blur">
        <div class="mb-2 flex items-center justify-between">
          <div class="flex items-center gap-2">
            <span class="text-2xl leading-none">ğŸ‡»ğŸ‡ª</span>
            <div><div class="text-sm font-semibold">Caracas</div><div class="text-xs opacity-60">Venezuela</div></div>
          </div>
          <div class="text-pink-300">ğŸ“</div>
        </div>
        <div class="flex items-baseline justify-between">
          <div id="timeVE" class="text-2xl font-bold">â€”</div>
          <div id="weekdayVE" class="text-xs opacity-60">â€”</div>
        </div>
      </div>
    </div>
  </section>

  <!-- CUTE QUOTES -->
  <section class="mx-auto mt-10 max-w-3xl px-6">
    <div class="relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 text-center" style="font-family:'Dancing Script',cursive">
      <p id="quote" class="text-xl">TÃº + Yo = â™¡</p>
    </div>
  </section>

  <!-- LOVE NOTE (sweeter) -->
  <section class="mx-auto mt-12 max-w-3xl px-6">
    <div class="rounded-3xl border border-white/10 bg-white/10 p-6 shadow-xl backdrop-blur glow">
      <div class="flex items-center gap-2"><div class="text-pink-300">âœ‰ï¸</div><h3 id="loveNoteTitle" class="text-xl font-bold">â€”</h3></div>
      <p id="loveNoteBody" class="mt-3 leading-relaxed opacity-90">â€”</p>
    </div>
  </section>

  <!-- MUSIC: single song embed only -->
  <section class="mx-auto mt-12 max-w-3xl px-6 pb-24">
    <div class="rounded-3xl border border-white/10 bg-white/5 p-6 shadow-xl backdrop-blur">
      <div class="flex items-center gap-2"><div class="text-pink-300">ğŸµ</div><h3 id="playlistTitle" class="text-xl font-bold">â€”</h3></div>
      <!-- Replace track ID below with your song; only ONE track shown -->
      <div class="space-y-3 mt-4">
        <iframe loading="lazy" style="border-radius:12px" src="https://open.spotify.com/embed/track/5WXXXXYOURTRACKID" width="100%" height="80" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture"></iframe>
      </div>
    </div>
  </section>

  <section class="mx-auto mt-10 max-w-3xl px-6">
  <div class="divider">ğŸ’</div>
</section>

<!-- LOVE GOALS (checklist) -->
<section class="mx-auto mt-8 max-w-3xl px-6">
  <div class="rounded-3xl border border-white/10 bg-white/5 p-6 shadow-xl backdrop-blur">
    <div class="flex items-center gap-2"><div class="text-rose-300">ğŸ§¸</div><h3 class="text-xl font-bold kawaii">Our Cute Goals</h3></div>
    <ul id="goals" class="mt-3 space-y-2 text-sm"></ul>
    <div class="mt-3 flex gap-2">
      <input id="goalInput" class="flex-1 rounded-xl bg-white/10 px-3 py-2 text-sm outline-none ring-1 ring-white/10 focus:ring-2 focus:ring-rose-300/60" placeholder="Add a tiny promiseâ€¦ (e.g., Sunday video call)"/>
      <button id="addGoal" class="candy-btn">ï¼‹</button>
    </div>
  </div>
</section>

<!-- WISH JAR -->
<section class="mx-auto mt-8 max-w-3xl px-6 pb-24">
  <div class="rounded-3xl border border-white/10 bg-white/5 p-6 shadow-xl backdrop-blur">
    <div class="flex items-center gap-2"><div class="text-rose-300">âœ¨</div><h3 class="text-xl font-bold kawaii">Wish Jar</h3></div>
    <div id="wishes" class="mt-3 flex flex-wrap gap-2"></div>
    <div class="mt-3 flex gap-2">
      <input id="wishInput" class="flex-1 rounded-xl bg-white/10 px-3 py-2 text-sm outline-none ring-1 ring-white/10 focus:ring-2 focus:ring-rose-300/60" placeholder="Type a wish for laterâ€¦"/>
      <button id="addWish" class="candy-btn">ğŸ’– Add</button>
    </div>
  </div>
</section>

<footer class="mx-auto max-w-5xl px-6 pb-10 text-center text-xs opacity-70">
    Made with <span class="inline-flex items-center gap-1">ğŸ’– love</span> â€¢ Designed for Bhanu & Lola
  </footer>

<script>
/* ====== CONFIG ====== */
const MET_AT = new Date(Date.UTC(2025, 5, 4, 0, 0, 0)); // 04 June 2025 (UTC)

/* ====== I18N (Venezuelan Spanish + Hinglish) ====== */
const L10N = {
  hi: {
    tagline: "India se Venezuela â€¢ Since {date}",
    timeShared: "Time We've Shared",
    nextMonthsary: "Next Monthsary",
    longDistance: "âœ¨ Long distance, short hearts",
    loveNoteTitle: "Ek chhota sa love note ğŸ’Œ",
    loveNoteBody: "Hey Lola, har din phone pe hansi, chhoti chhoti baatein, aur woh goodnight texts â€” sab kuch special banata hai. 04 June 2025 ko jo milan shuru hua, uski har monthsary hum celebrate karenge. Distance sirf kilometers mein hota hai, dil toh hamesha paas hote hain. â¤ï¸ â€” Bhanu",
    playlist: "Hamari Playlist",
    labels: { years:"Years", months:"Months", days:"Days", hours:"Hours", minutes:"Minutes", seconds:"Seconds" },
    quotes: ["You + Me = â™¡","Across oceans, same moon.","I choose you, every day.","Tu hi toh ho meri smile ka reason âœ¨","Besitos hasta Caracas ğŸ’Œ"]
  },
  es: {
    tagline: "De India a Venezuela â€¢ Desde {date}",
    timeShared: "Tiempo que llevamos juntitos",
    nextMonthsary: "PrÃ³ximo mesiversario",
    longDistance: "âœ¨ Lejos en km, cerquita del cora",
    loveNoteTitle: "Una notita de amor ğŸ’Œ",
    loveNoteBody: "Hola Lola, cada llamadita, cada risita y esos mensajitos de buenas noches hacen todo especial. Desde el 04 de junio de 2025 celebramos cada mesiversario. La distancia solo estÃ¡ en el mapa; nuestros corazones siempre junticos. â¤ï¸ â€” Bhanu",
    playlist: "Nuestra canciÃ³n",
    labels: { years:"AÃ±os", months:"Meses", days:"DÃ­as", hours:"Horas", minutes:"Min", seconds:"Seg" },
    quotes: ["TÃº + Yo = â™¡","A travÃ©s del mar, la misma luna.","Te elijo todos los dÃ­as.","Eres mi sonrisa, mi amorcito âœ¨","Besitos hasta Caracas ğŸ’Œ"]
  }
};
let CURRENT_LANG = 'es'; // default Spanish for Lola

/* ====== Helpers ====== */
function isLeap(y){return (y%4===0 && y%100!==0) || (y%400===0)}
function diffParts(from, to){
  let d1 = new Date(from), d2 = new Date(to);
  if(d2 < d1) [d1,d2] = [d2,d1];
  let years = d2.getFullYear()-d1.getFullYear();
  let months = d2.getMonth()-d1.getMonth();
  let days = d2.getDate()-d1.getDate();
  let hours = d2.getHours()-d1.getHours();
  let minutes = d2.getMinutes()-d1.getMinutes();
  let seconds = d2.getSeconds()-d1.getSeconds();
  if(seconds<0){seconds+=60; minutes--}
  if(minutes<0){minutes+=60; hours--}
  if(hours<0){hours+=24; days--}
  const monthLengths=[31,(isLeap(d2.getFullYear())?29:28),31,30,31,30,31,31,30,31,30,31];
  if(days<0){ const pm=(d2.getMonth()-1+12)%12; days+=monthLengths[pm]; months-- }
  if(months<0){ months+=12; years-- }
  return {years,months,days,hours,minutes,seconds};
}
// Robust time formatting using formatToParts (no split problems)
function fmtTz(date, tz){
  const parts = new Intl.DateTimeFormat('en-GB', { timeZone: tz, hour12: true, hour:'2-digit', minute:'2-digit', second:'2-digit', weekday:'short' }).formatToParts(date);
  const get = t => parts.find(p => p.type === t)?.value || '';
  const weekday = get('weekday');
  const time = `${get('hour')}:${get('minute')}:${get('second')} ${get('dayPeriod')}`.trim();
  return {weekday, time};
}
function nextMonthsary(start, now){
  const s = new Date(start), n = new Date(now); const day = s.getDate();
  let target = new Date(n.getFullYear(), n.getMonth(), day, 0,0,0);
  if(target < n) target = new Date(n.getFullYear(), n.getMonth()+1, day, 0,0,0);
  while(target.getDate() !== day){ target.setDate(target.getDate()-1); }
  return target;
}

/* ====== Language Wiring ====== */
function setLanguage(lang){
  CURRENT_LANG = lang;
  const t = L10N[lang];
  const dateStr = MET_AT.toLocaleDateString(lang==='es'?'es-VE':'en-GB',{day:'2-digit',month:'long',year:'numeric'});
  document.getElementById('tagline').textContent = t.tagline.replace('{date}', dateStr);
  document.getElementById('timeSharedTitle').textContent = t.timeShared;
  document.getElementById('nextMonthsaryTitle').textContent = t.nextMonthsary;
  document.getElementById('longDistanceBadge').textContent = t.longDistance;
  document.getElementById('loveNoteTitle').textContent = t.loveNoteTitle;
  document.getElementById('loveNoteBody').textContent  = t.loveNoteBody;
  document.getElementById('playlistTitle').textContent = t.playlist;
  document.getElementById('yearsLabel').textContent   = t.labels.years;
  document.getElementById('monthsLabel').textContent  = t.labels.months;
  document.getElementById('daysLabel').textContent    = t.labels.days;
  document.getElementById('hoursLabel').textContent   = t.labels.hours;
  document.getElementById('minutesLabel').textContent = t.labels.minutes;
  document.getElementById('secondsLabel').textContent = t.labels.seconds;
  window.__QUOTES__ = t.quotes; // for rotator
}

document.getElementById('lang-hi').addEventListener('click', ()=> setLanguage('hi'));
document.getElementById('lang-es').addEventListener('click', ()=> setLanguage('es'));

/* ====== Live Counters & Clocks ====== */
function safeSet(id, val){ const el = document.getElementById(id); if (el) el.textContent = String(val); }
function update(){
  const now = new Date();
  const t = diffParts(MET_AT, now);
  safeSet('years', t.years); safeSet('months', t.months); safeSet('days', t.days);
  safeSet('hours', t.hours); safeSet('minutes', t.minutes); safeSet('seconds', t.seconds);
  const nx = nextMonthsary(MET_AT, now);
  const fmt = (CURRENT_LANG==='es'?'es-VE':'en-GB');
  safeSet('nextDate', nx.toLocaleDateString(fmt,{day:'2-digit',month:'long',year:'numeric'}));
  const left = diffParts(now, nx);
  safeSet('dLeft', left.days + left.months*30 + left.years*365);
  safeSet('hLeft', left.hours); safeSet('mLeft', left.minutes);
  const i = fmtTz(now, 'Asia/Kolkata'); safeSet('timeIN', i.time); safeSet('weekdayIN', i.weekday);
  const v = fmtTz(now, 'America/Caracas'); safeSet('timeVE', v.time); safeSet('weekdayVE', v.weekday);
}
if (window.__intervalFix) clearInterval(window.__intervalFix);
setLanguage('es'); // default
// accurate 1s ticker that pauses in background
(function startTicker(){
  let last = performance.now();
  function tick(now){
    if (document.hidden) { last = now; requestAnimationFrame(tick); return; }
    if (now - last >= 1000) { update(); last = now; }
    requestAnimationFrame(tick);
  }
  update(); requestAnimationFrame(tick);
})();

/* ====== Background: Stars / Emojis / Hearts (mobile-optimized) ====== */
(function makeStars(){
  const wrap = document.getElementById('stars');
  const COUNT = window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 0 : (window.innerWidth < 480 ? 90 : 150);
  for(let i=0;i<COUNT;i++){
    const s=document.createElement('span'); s.className='star';
    s.style.left=Math.random()*100+'%'; s.style.top=Math.random()*100+'%';
    s.style.setProperty('--dur',(2+Math.random()*3)+'s'); wrap.appendChild(s);
  }
})();
(function makeEmojis(){
  const wrap = document.getElementById('emojis');
  const list = ['ğŸ’–','ğŸ’«','âœ¨','ğŸ’Œ','ğŸŒ¸','ğŸ§¸','ğŸ“','ğŸ€'];
  const COUNT = window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 0 : (window.innerWidth < 480 ? 10 : 18);
  for(let i=0;i<COUNT;i++){
    const e=document.createElement('span'); e.className='emoji text-xl'; e.textContent=list[i%list.length];
    e.style.left=Math.random()*100+'%'; e.style.top=Math.random()*100+'%';
    e.style.animationDuration=(8+Math.random()*6)+'s'; wrap.appendChild(e);
  }
})();
(function makeHearts(){
  const wrap = document.getElementById('hearts');
  const COUNT = window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 0 : (window.innerWidth < 480 ? 10 : 18);
  for(let i=0;i<COUNT;i++){
    const h=document.createElement('div'); h.className='heart'; h.textContent='â¤';
    h.style.left=Math.random()*100+'%'; h.style.bottom='-40px';
    h.style.fontSize=(14+Math.random()*20)+'px';
    h.style.animationDuration=(8+Math.random()*8)+'s';
    h.style.animationDelay=(Math.random()*5)+'s'; wrap.appendChild(h);
  }
})();

/* Celebrate burst */
const celebrateBtn = document.getElementById('celebrate');
if (celebrateBtn) celebrateBtn.addEventListener('click', ()=>{
  const wrap = document.getElementById('hearts');
  const burst = window.innerWidth < 480 ? 16 : 24;
  for(let i=0;i<burst;i++){
    const h=document.createElement('div'); h.textContent='ğŸ’–';
    h.style.position='absolute'; h.style.left=(50+(Math.random()*40-20))+'%';
    h.style.top='20%'; h.style.fontSize=(16+Math.random()*18)+'px';
    h.style.animation='floatUp 1.4s ease-out forwards'; wrap.appendChild(h);
    setTimeout(()=>wrap.removeChild(h),1600);
  }
});

/* Tap/click heart burst for extra kawaii on phones */
(function tapBurst(){
  const wrap = document.body;
  const make = (x,y)=>{
    const n = 10; // lightweight
    for(let i=0;i<n;i++){
      const s = document.createElement('span');
      s.textContent = i%2? 'ğŸ’–':'ğŸŒ¸';
      s.style.position='fixed'; s.style.left=x+'px'; s.style.top=y+'px';
      s.style.pointerEvents='none'; s.style.zIndex=50; s.style.transition='transform 800ms ease, opacity 800ms ease';
      s.style.transform=`translate(${(Math.random()*60-30)}px, ${(Math.random()*-80-20)}px) scale(${1+Math.random()*0.3})`;
      s.style.opacity='0';
      wrap.appendChild(s);
      requestAnimationFrame(()=>{ s.style.opacity='1'; s.style.transform=`translate(${(Math.random()*120-60)}px, ${(Math.random()*-140-60)}px) scale(${1.2+Math.random()*0.4})`; s.style.opacity='0';});
      setTimeout(()=>wrap.removeChild(s), 850);
    }
  };
  const handler = (e)=>{ const t = e.touches? e.touches[0]: e; make(t.clientX, t.clientY); };
  document.addEventListener('click', handler);
  document.addEventListener('touchstart', handler, {passive:true});
})();

/* Celebrate burst */
function burstAt(x,y){
  const n = 18; for(let i=0;i<n;i++){ const h=document.createElement('div'); h.textContent= i%2? 'ğŸ’–':'ğŸŒ¸'; h.style.position='fixed'; h.style.left=x+'px'; h.style.top=y+'px'; h.style.fontSize=(16+Math.random()*10)+'px'; h.style.pointerEvents='none'; h.style.animation='floatUp 1.4s ease-out forwards'; document.body.appendChild(h); setTimeout(()=>h.remove(),1400); }
}
['celebrate','celeSmall'].forEach(id=>{ const b=document.getElementById(id); if(b){ b.addEventListener('click', (e)=>{ const r = b.getBoundingClientRect(); burstAt(r.left+r.width/2, r.top); }); }});

/* Goals + Wish Jar (localStorage) */
(function uxLists(){
  const goalsEl = document.getElementById('goals'); const goalInput = document.getElementById('goalInput'); const addGoal = document.getElementById('addGoal');
  const wishesEl = document.getElementById('wishes'); const wishInput = document.getElementById('wishInput'); const addWish = document.getElementById('addWish');
  if(!goalsEl||!wishesEl) return;
  let goals = JSON.parse(localStorage.getItem('love_goals')||'[]'); let wishes = JSON.parse(localStorage.getItem('wish_jar')||'[]');
  function renderGoals(){ goalsEl.innerHTML=''; goals.forEach((g,i)=>{ const li=document.createElement('li'); li.className='flex items-center gap-2 rounded-xl bg-white/8 px-3 py-2 ring-1 ring-white/10'; const cb=document.createElement('input'); cb.type='checkbox'; cb.checked=!!g.done; cb.className='accent-rose-400'; const span=document.createElement('span'); span.textContent=g.text; if(g.done) span.className='line-through opacity-60'; cb.onchange=()=>{goals[i].done=cb.checked; localStorage.setItem('love_goals',JSON.stringify(goals)); renderGoals();}; const del=document.createElement('button'); del.textContent='âœ–'; del.className='ml-auto text-xs opacity-70 hover:opacity-100'; del.onclick=()=>{goals.splice(i,1); localStorage.setItem('love_goals',JSON.stringify(goals)); renderGoals();}; li.append(cb,span,del); goalsEl.appendChild(li); }); }
  function renderWishes(){ wishesEl.innerHTML=''; wishes.forEach((w,i)=>{ const b=document.createElement('span'); b.textContent=w; b.className='select-none rounded-full bg-rose-400/15 px-3 py-1 text-xs ring-1 ring-rose-300/40'; const x=document.createElement('button'); x.textContent='Ã—'; x.className='ml-1 text-[10px] opacity-70'; const wrap=document.createElement('span'); x.onclick=()=>{wishes.splice(i,1); localStorage.setItem('wish_jar',JSON.stringify(wishes)); renderWishes();}; wrap.append(b,x); wrap.className='inline-flex items-center'; wishesEl.appendChild(wrap); }); }
  renderGoals(); renderWishes();
  addGoal&&addGoal.addEventListener('click',()=>{ const t=(goalInput.value||'').trim(); if(!t) return; goals.push({text:t,done:false}); localStorage.setItem('love_goals',JSON.stringify(goals)); goalInput.value=''; renderGoals(); });
  addWish&&addWish.addEventListener('click',()=>{ const t=(wishInput.value||'').trim(); if(!t) return; wishes.push(t); localStorage.setItem('wish_jar',JSON.stringify(wishes)); wishInput.value=''; renderWishes(); });
})();

/* Quotes rotator */
(function quotes(){
  window.__QUOTES__ = L10N[CURRENT_LANG].quotes;
  const p = document.getElementById('quote'); let i=0;
  setInterval(()=>{ const arr = window.__QUOTES__ || L10N[CURRENT_LANG].quotes; i=(i+1)%arr.length; p.textContent=arr[i]; }, 3000);
})();

/* ====== Self-tests (console only) ====== */
(function selfTests(){
  const zero = diffParts(new Date(0), new Date(0));
  console.assert(zero.years===0 && zero.months===0 && zero.days===0, 'diffParts zero failed');
  const nx = nextMonthsary(new Date(2025,5,4), new Date(2025,5,5));
  console.assert(nx.getMonth()===6 && nx.getDate()<=4, 'nextMonthsary after-day failed');
  const nx2 = nextMonthsary(new Date(2025,5,4), new Date(2025,5,1));
  console.assert(nx2.getMonth()===5 && nx2.getDate()===4, 'nextMonthsary before-day failed');
})();
</script>
</body>
</html>
